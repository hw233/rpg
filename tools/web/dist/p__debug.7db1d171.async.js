(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[765],{66594:function(de,$,e){"use strict";e.r($),e.d($,{default:function(){return re}});var ve=e(18106),x=e(16004),u=e(67294),b=e(67265),ce=e(57106),J=e(99683),Z=e(39428),fe=e(34792),I=e(48086),O=e(3182),f=e(2824),me=e(71194),Y=e(77175),L=e(55168),he=e(18446),z=e(33860),ge=e(47673),G=e(4107),Se=e(49111),V=e(19650),Ce=e(63185),K=e(9676),ye=e(17462),Q=e(76772),xe=e(57663),E=e(71577),Ze=e(71153),U=e(60331),X=e(952),p=e(90672),k=e(84232),w=e(30381),q=e.n(w),_=e(58533),n=e(85893),ee=function(o){var g=(0,u.useRef)(),S=(0,u.useRef)(),j=(0,u.useState)(),i=(0,f.Z)(j,2),D=i[0],R=i[1],A=(0,u.useState)(!1),C=(0,f.Z)(A,2),P=C[0],F=C[1],T=(0,u.useState)([]),M=(0,f.Z)(T,2),m=M[0],B=M[1],y=function(t,s){var c,v;if(s!==void 0&&!(s===""&&t==="SEND")){var le=t==="SEND"&&"#5BD8A6"||"green",ie=m,ue=[{title:q()().format("YYYY-MM-DD HH:mm:ss"),subTitle:(0,n.jsx)(U.Z,{color:le,children:t}),content:(0,n.jsx)("pre",{children:s})}];B(ue.concat(ie)),(c=S.current)===null||c===void 0||(v=c.reloadAndRest)===null||v===void 0||v.call(c)}},N=function(t){F(t.target.checked)},H=function(t){R(t.target.value)},l=function(){var t,s,c=(t=g.current)===null||t===void 0?void 0:t.getFieldValue(o.name);y("SEND",c),(s=g.current)===null||s===void 0||s.resetFields(),o.onCommandSend(o.name,c)},r=function(t){y("SEND",t.target.value),R(""),o.onCommandSend(o.name,t.target.value)},d=function(){var t,s;B([]),(t=S.current)===null||t===void 0||(s=t.reloadAndRest)===null||s===void 0||s.call(t)},h=function(){var t;(t=o.onHotfix)===null||t===void 0||t.call(o)};return(0,u.useEffect)(function(){o.response&&o.response.name==o.name&&y("RECV",o.response.data)},[o.response]),(0,n.jsxs)(V.Z,{direction:"vertical",style:{width:"100%"},children:[(0,n.jsxs)(V.Z,{direction:"horizontal",size:20,children:[(0,n.jsx)(E.Z,{type:"primary",onClick:h,children:"\u70ED\u66F4"}),(0,n.jsx)(Q.Z,{message:"\u5F53\u524D\u8FDB\u7A0B: ".concat(o.name),type:"success"}),(0,n.jsx)(K.Z,{name:o.name,onChange:N,children:"\u591A\u884C\u6A21\u5F0F"}),(0,n.jsx)(E.Z,{type:"primary",onClick:d,children:"\u6E05\u7A7A\u5386\u53F2\u8BB0\u5F55"}),P&&(0,n.jsx)(E.Z,{type:"primary",onClick:l,children:"\u63D0\u4EA4"})]}),!P&&(0,n.jsx)(G.Z,{allowClear:!0,placeholder:"\u8F93\u5165\u547D\u4EE4\u540E\u56DE\u8F66\u63D0\u4EA4\u547D\u4EE4",onPressEnter:r,value:D,onChange:H})||(0,n.jsx)(X.ZP,{formRef:g,submitter:{render:function(){return[]}},children:(0,n.jsx)(p.Z,{initialValue:"",allowClear:!0,fieldProps:{rows:5},placeholder:"\u8F93\u5165\u547D\u4EE4\u540E\u70B9\u51FB\u63D0\u4EA4\u6309\u94AE\u63D0\u4EA4\u547D\u4EE4",name:o.name})}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{id:"historyScrollDiv",style:{height:600,overflow:"auto",padding:"0 0"},children:(0,n.jsx)(_.Z,{next:function(){},hasMore:!1,loader:(0,n.jsx)(z.Z,{avatar:!0,paragraph:{rows:1},active:!0}),dataLength:m.length,scrollableTarget:"historyScrollDiv",children:(0,n.jsx)(k.ZP,{style:{height:"auto"},dataSource:m,actionRef:S,grid:{gutter:16,column:1},metas:{title:{dataIndex:"title"},subTitle:{dataIndex:"subTitle"},description:{dataIndex:"content"}}})})})})]})},te=ee,ne=e(48764).Buffer,ae=function(){var o=x.Z.TabPane,g=Y.Z.confirm,S=(0,u.useState)(),j=(0,f.Z)(S,2),i=j[0],D=j[1],R=(0,u.useState)([]),A=(0,f.Z)(R,2),C=A[0],P=A[1],F=(0,u.useState)(),T=(0,f.Z)(F,2),M=T[0],m=T[1],B=function(){var l=(0,O.Z)((0,Z.Z)().mark(function r(d){var h,a,t,s;return(0,Z.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,new Response(d.data).arrayBuffer();case 2:if(h=v.sent,a=JSON.parse(ne.from(h).toString()),a.type=="servers"){for(t=[],s=0;s<a.data.length;s++)t.push({name:a.data[s]});P(t)}else a.type=="message"?m({name:a.target,data:a.data}):a.type=="error"?I.default.error(a.data):a.type=="reload"&&m({name:a.target,data:a.data});case 5:case"end":return v.stop()}},r)}));return function(d){return l.apply(this,arguments)}}(),y=function l(){var r=new WebSocket("ws://localhost:9000/telnet");r.onopen=function(){D(r)},r.onclose=function(){D(void 0),l()},r.onmessage=B};(0,L.QT)((0,O.Z)((0,Z.Z)().mark(function l(){return(0,Z.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:y();case 1:case"end":return d.stop()}},l)}))),(0,u.useEffect)(function(){i!==void 0&&i.send(JSON.stringify({type:"servers"}))},[i]);var N=function(r,d){if(!i){I.default.warn("\u8FDE\u63A5\u5DF2\u65AD\u5F00\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5").then();return}var h={type:"message",target:r,data:d};i.send(JSON.stringify(h))},H=function(){g({title:"\u70ED\u66F4\u786E\u8BA4",onOk:function(){i==null||i.send(JSON.stringify({type:"reload"}))},onCancel:function(){}})};return(0,n.jsx)(x.Z,{type:"card",tabPosition:"left",tabBarGutter:10,tabBarStyle:{width:"15%"},children:C.length>0&&C.map(function(l){return(0,n.jsx)(o,{tab:l.name,children:(0,n.jsx)(te,{name:l.name,response:M,onCommandSend:N,onHotfix:H})},l.name)})||(0,n.jsx)(o,{tab:"\u65E0",children:(0,n.jsx)(J.ZP,{status:"404",title:"404",subTitle:"\u672A\u83B7\u53D6\u5230\u670D\u52A1\u5668\u5217\u8868"})},"empty")})},oe=ae,se=function(){var o=x.Z.TabPane;return(0,n.jsx)(b.ZP,{children:(0,n.jsx)(x.Z,{defaultActiveKey:"console",children:(0,n.jsx)(o,{tab:"\u63A7\u5236\u53F0",children:(0,n.jsx)(oe,{})},"console")})})},re=se}}]);
